{{ define "main" }}
    {{ $kind := .Kind }}
    {{ partial "widgets/aside.html" . }}

    <section class="castration fl p_relative modules">
        {{ if .IsHome }}
            <div class="castration cover p_relative atcCentral" style="background-image: linear-gradient(black, black), url(/img/cover/default.jpg); background-blend-mode: saturation; background-position-y: 30% !important;">
                <div class="fl p_relative">
                    <a href="https://www.facebook.com/phantomdrafts/" target="_blank"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>
                    <a href="https://www.instagram.com/horrorprom" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                    <a href="https://www.youtube.com/@spirits-show" target="_blank"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
                </div>
                <div class="fr p_relative">
                    <a href="https://discord.com/users/iamthesirenhead" target="_blank"><i class="fa fa-gamepad" aria-hidden="true"></i></a>
                </div>
                <div class="t_center castration base_width p_relative">
                    <h3>
                        {{ i18n "soc_block_title" }}
                    </h3>
                    <p>
                        {{ i18n "soc_block_desc" }}
                    </p>
                </div>
            </div>
        {{ end }}

        <ul id="content">
            {{ if .IsHome }}
                <!-- Добавляем пагинацию и сортировку по Lastmod -->
                {{ $paginator := .Paginate (sort .Site.RegularPages "Lastmod" "desc") .Site.Params.page.maxHomePostCount }}
                {{ range $paginator.Pages }}
                    {{ if not .Params.hideFromCenter }}
                        {{ partial "widgets/post-card.html" . }}
                    {{ end }}
                {{ end }}
            {{ else }}
                <!-- Для остальных страниц используем обычный вывод -->
                {{ range .Pages }}
                    {{ if not .Params.hideFromCenter }}
                        {{ partial "widgets/post-card.html" . }}
                    {{ end }}
                {{ end }}
            {{ end }}
        </ul>

        <!-- Блок пагинации -->
        {{ if .IsHome }}
        <div class="pagination">
            {{ $paginator := .Paginator }}
            {{ if $paginator.HasPrev }}
                <a href="{{ $paginator.Prev.URL }}" class="prev">{{ i18n "pagination_previous" }}</a>
            {{ end }}

            {{ range $paginator.Pagers }}
                <a href="{{ .URL }}" class="{{ if eq .PageNumber $paginator.PageNumber }}active{{ end }}">
                    {{ .PageNumber }}
                </a>
            {{ end }}

            {{ if $paginator.HasNext }}
                <a href="{{ $paginator.Next.URL }}" class="next">{{ i18n "pagination_next" }}</a>
            {{ end }}
        </div>
        {{ end }}
    </section>
{{ end }}
